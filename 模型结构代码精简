graph TD
    A[输入: feature_sequence] --> LSTM_Module{LSTM 模块};
    A2[输入: raw_data] --> CNN_Module{1D-CNN 模块};
    
    subgraph "1D-CNN 模块"
        direction LR
        Input[11通道输入] --> ConvBlocks[(Conv1d-ReLU-BN-Pool)] --> Flatten --> cnn_output[CNN 输出 v_raw]
    end

    LSTM_Module --> lstm_last_output[LSTM 最后时间步输出];
    LSTM_Module --> state_feature[LSTM 状态特征];
    
    lstm_last_output --> Concat[特征拼接];
    cnn_output --> Concat;
    
    Concat --> Gating_Module{门控层};
    Gating_Module --> gate[门控值];
    
    cnn_output --> Linear_Transform[线性变换];
    Linear_Transform --> transformed_cnn[变换后CNN特征];
    
    subgraph "门控融合机制"
      lstm_last_output --> Fusion
      gate --> Fusion
      transformed_cnn --> Fusion[特征融合]
    end
    
    Fusion --> fused_vector[融合向量];
    
    fused_vector --> Classifier_Module{分类器};
    Classifier_Module --> logits[输出 logits];
    
    subgraph "最终输出"
      logits --> Final_Output
      state_feature --> Final_Output[模型输出]
      gate --> Final_Output
    end

    style LSTM_Module fill:#e1f5fe
    style CNN_Module fill:#f3e5f5
    style Gating_Module fill:#fff3e0
    style Fusion fill:#e8f5e